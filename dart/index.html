<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>যেকোনো শব্দ সিলেক্ট করলেই অর্থ পপআপ</title>
<style>
    body {
        font-family: 'Kalpurush', 'SolaimanLipi', sans-serif;
        max-width: 800px;
        margin: 30px auto;
        padding: 20px;
        background: #f4f4f4;
        line-height: 1.8;
    }
    .article {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h1 { color: #d32f2f; text-align: center; }

    /* পপআপ স্টাইল */
    #dictPopup {
        position: absolute;
        background: #333;
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 15px;
        max-width: 300px;
        z-index: 999999;
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        display: none;
        pointer-events: none;
    }
    #dictPopup::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 20px;
        border-width: 8px;
        border-style: solid;
        border-color: #333 transparent transparent transparent;
    }
</style>
</head>
<body>

<div class="article">
    <h1>বিশ্বকাপে আর্জেন্টিনার ঐতিহাসিক জয়</h1>
    <p>গত রবিবার কাতারের লুসাইল স্টেডিয়ামে অনুষ্ঠিত হলো ফিফা বিশ্বকাপ ২০২২-এর ফাইনাল। আর্জেন্টিনা ও ফ্রান্সের মধ্যে এই মহারণ শেষ হয়েছে পেনাল্টি শ্যুটআউটে। লিওনেল মেসির নেতৃত্বে আর্জেন্টিনা ৪-২ ব্যবধানে জিতে ৩৬ বছর পর তৃতীয়বারের মতো বিশ্বচ্যাম্পিয়ন হয়েছে।</p>

    <p>ম্যাচে কিলিয়ান এমবাপ্পে হ্যাটট্রিক করলেও শেষ হাসি হেসেছে আর্জেন্টিনা। গোলকিপার এমিলিয়ানো মার্টিনেজ দুটি পেনাল্টি ঠেকিয়ে হিরো হয়েছেন। বুয়েন্স আয়ার্সে লাখো মানুষ রাস্তায় নেমে উদযাপন করছে।</p>

    <p>এই জয়কে ফুটবল ইতিহাসের অন্যতম সেরা ফাইনাল বলা হচ্ছে।</p>
</div>

<!-- পপআপ ডিভ -->
<div id="dictPopup"></div>

<script>
// পপআপ দেখানোর ফাংশন
function showMeaning(word, meaning, x, y) {
    const popup = document.getElementById("dictPopup");
    popup.innerHTML = `<strong>${word}</strong><br><small>${meaning}</small>`;
    popup.style.display = "block";
    popup.style.left = x + "px";
    popup.style.top = (y + 20) + "px";
}

// পপআপ লুকানো
function hideMeaning() {
    document.getElementById("dictPopup").style.display = "none";
}

// মাউস আপ হলে (সিলেকশন শেষ হলে)
document.addEventListener("mouseup", function(e) {
    setTimeout(() => {  // ছোট ডিলে দিলাম যাতে সিলেকশন পুরোপুরি হয়
        let sel = window.getSelection();
        let text = sel.toString().trim();

        if (text && text.length > 0 && text.length < 30 && text.split(" ").length === 1) {  // শুধু একটা শব্দ
            let rect = sel.getRangeAt(0).getBoundingClientRect();

            // বাংলা না ইংরেজি চেক
            if (/[\u0980-\u09FF]/.test(text)) {
                // বাংলা শব্দ
                fetch(`https://api.shabdkosh.com/v1/bn/${encodeURIComponent(text)}`)
                .then(r => r.ok ? r.json() : Promise.reject())
                .then(d => showMeaning(text, d.meaning || d.def || "অর্থ পাওয়া যায়নি", e.pageX, rect.bottom + window.scrollY))
                .catch(() => showMeaning(text, "ইন্টারনেট সংযোগ চেক করুন", e.pageX, rect.bottom + window.scrollY));
            } else {
                // ইংরেজি শব্দ
                fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${text.toLowerCase()}`)
                .then(r => r.ok ? r.json() : Promise.reject())
                .then(data => {
                    let def = data[0]?.meanings[0]?.definitions[0]?.definition || "Meaning not found";
                    showMeaning(text, def, e.pageX, rect.bottom + window.scrollY);
                })
                .catch(() => showMeaning(text, "Meaning not found", e.pageX, rect.bottom + window.scrollY));
            }
        } else {
            hideMeaning();
        }
    }, 10);
});

// ক্লিক করলে বা অন্য কোথাও সিলেক্ট করলে পপআপ লুকাবে
document.addEventListener("mousedown", function(e) {
    if (!e.target.closest("#dictPopup")) hideMeaning();
});
</script>

<!-- বাংলা ফন্ট -->
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">
<style>body { font-family: 'Hind Siliguri', sans-serif; }</style>

</body>
</html>
