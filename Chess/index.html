<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        .chess-board {
            width: 480px;
            height: 480px;
            border: 2px solid #333;
            margin: 20px auto;
        }

        .square {
            width: 60px;
            height: 60px;
            float: left;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
        }

        .white {
            background-color: #f0d9b5;
        }

        .black {
            background-color: #b58863;
        }

        .selected {
            background-color: #7a9a58;
        }

        .piece {
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="chess-board" id="board"></div>

    <script>
        class ChessGame {
            constructor() {
                this.board = document.getElementById('board');
                this.selectedPiece = null;
                this.currentPlayer = 'white';
                this.initializeBoard();
                this.createPieces();
            }

            initializeBoard() {
                this.board.innerHTML = '';
                for (let row = 0; row < 8; row++) {
                    for (let col = 0; col < 8; col++) {
                        const square = document.createElement('div');
                        square.className = `square ${(row + col) % 2 === 0 ? 'white' : 'black'}`;
                        square.dataset.row = row;
                        square.dataset.col = col;
                        square.addEventListener('click', (e) => this.handleSquareClick(e));
                        this.board.appendChild(square);
                    }
                }
            }

            createPieces() {
                const initialPosition = [
                    ['black', '♜', '♞', '♝', '♛', '♚', '♝', '♞', '♜'],
                    ['black', '♟', '♟', '♟', '♟', '♟', '♟', '♟', '♟'],
                    [],
                    [],
                    [],
                    [],
                    ['white', '♙', '♙', '♙', '♙', '♙', '♙', '♙', '♙'],
                    ['white', '♖', '♘', '♗', '♕', '♔', '♗', '♘', '♖']
                ];

                const squares = document.getElementsByClassName('square');
                for (let i = 0; i < squares.length; i++) {
                    const row = parseInt(squares[i].dataset.row);
                    const col = parseInt(squares[i].dataset.col);
                    const pieceData = initialPosition[row][col];
                    
                    if (pieceData) {
                        const piece = document.createElement('div');
                        piece.className = 'piece';
                        piece.textContent = initialPosition[row][col + 1];
                        piece.style.color = initialPosition[row][0] === 'white' ? '#fff' : '#000';
                        squares[i].appendChild(piece);
                    }
                }
            }

            handleSquareClick(event) {
                const square = event.currentTarget;
                const piece = square.querySelector('.piece');

                if (this.selectedPiece) {
                    // Move piece
                    if (square !== this.selectedPiece.square) {
                        const isValidMove = this.isValidMove(
                            this.selectedPiece.square,
                            square
                        );

                        if (isValidMove) {
                            this.movePiece(this.selectedPiece.square, square);
                            this.currentPlayer = this.currentPlayer === 'white' ? 'black' : 'white';
                        }
                    }
                    this.clearSelection();
                } else if (piece) {
                    // Select piece
                    const pieceColor = piece.style.color === 'rgb(255, 255, 255)' ? 'white' : 'black';
                    if (pieceColor === this.currentPlayer) {
                        this.selectedPiece = {
                            square: square,
                            element: piece
                        };
                        square.classList.add('selected');
                    }
                }
            }

            isValidMove(fromSquare, toSquare) {
                const fromRow = parseInt(fromSquare.dataset.row);
                const fromCol = parseInt(fromSquare.dataset.col);
                const toRow = parseInt(toSquare.dataset.row);
                const toCol = parseInt(toSquare.dataset.col);
                const piece = fromSquare.querySelector('.piece').textContent;

                // Basic pawn movement validation
                if (piece === '♙' || piece === '♟') {
                    const direction = piece === '♙' ? -1 : 1;
                    const startRow = piece === '♙' ? 6 : 1;
                    
                    // Regular move
                    if (fromCol === toCol && !toSquare.querySelector('.piece')) {
                        if (fromRow + direction === toRow) return true;
                        if (fromRow === startRow && fromRow + (2 * direction) === toRow) return true;
                    }
                }

                return true; // Simplified validation for other pieces
            }

            movePiece(fromSquare, toSquare) {
                const piece = fromSquare.querySelector('.piece');
                const targetPiece = toSquare.querySelector('.piece');

                if (targetPiece) {
                    targetPiece.remove();
                }

                toSquare.appendChild(piece);
            }

            clearSelection() {
                if (this.selectedPiece) {
                    this.selectedPiece.square.classList.remove('selected');
                    this.selectedPiece = null;
                }
            }
        }

        // Initialize the game
        const game = new ChessGame();
    </script>
</body>
</html>
