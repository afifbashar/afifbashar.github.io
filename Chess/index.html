<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Game</title>
    <style>
        .container {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .chess-board {
            width: 560px;
            height: 560px;
            border: 2px solid #333;
            display: grid;
            grid-template-columns: repeat(8, 1fr);
        }

        .square {
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            cursor: pointer;
            position: relative;
        }

        .white {
            background-color: #f0d9b5;
        }

        .black {
            background-color: #b58863;
        }

        .selected {
            background-color: #7a9a58 !important;
        }

        .possible-move {
            background-color: #7a9a5855;
        }

        .captured-pieces {
            width: 200px;
            padding: 10px;
            border: 2px solid #333;
            min-height: 100px;
        }

        .game-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .captured-piece {
            font-size: 30px;
            margin: 5px;
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 3px solid #333;
            text-align: center;
            display: none;
        }

        .restart-btn {
            padding: 10px 20px;
            font-size: 18px;
            margin-top: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="game-info">
        Current Turn: <span id="current-turn">White</span>
    </div>
    <div class="container">
        <div class="captured-pieces" id="captured-black">
            <h3>Black Captured:</h3>
        </div>
        <div class="chess-board" id="board"></div>
        <div class="captured-pieces" id="captured-white">
            <h3>White Captured:</h3>
        </div>
    </div>
    <div id="game-over" class="game-over">
        <h2 id="winner-text"></h2>
        <button class="restart-btn" onclick="location.reload()">New Game</button>
    </div>

    <script>
        class ChessGame {
            constructor() {
                this.board = document.getElementById('board');
                this.selectedPiece = null;
                this.currentPlayer = 'white';
                this.capturedWhite = [];
                this.capturedBlack = [];
                this.gameActive = true;
                this.initializeBoard();
                this.createPieces();
                this.updateTurnDisplay();
            }

            initializeBoard() {
                this.board.innerHTML = '';
                for (let row = 0; row < 8; row++) {
                    for (let col = 0; col < 8; col++) {
                        const square = document.createElement('div');
                        square.className = `square ${(row + col) % 2 === 0 ? 'white' : 'black'}`;
                        square.dataset.row = row;
                        square.dataset.col = col;
                        square.addEventListener('click', (e) => this.handleSquareClick(e));
                        this.board.appendChild(square);
                    }
                }
            }

            createPieces() {
                const initialPosition = [
                    ['♜', '♞', '♝', '♛', '♚', '♝', '♞', '♜'],
                    ['♟', '♟', '♟', '♟', '♟', '♟', '♟', '♟'],
                    [],
                    [],
                    [],
                    [],
                    ['♙', '♙', '♙', '♙', '♙', '♙', '♙', '♙'],
                    ['♖', '♘', '♗', '♕', '♔', '♗', '♘', '♖']
                ];

                const squares = this.board.children;
                for (let i = 0; i < squares.length; i++) {
                    const row = Math.floor(i / 8);
                    const col = i % 8;
                    const piece = initialPosition[row][col];
                    
                    if (piece) {
                        const pieceElement = document.createElement('div');
                        pieceElement.className = 'piece';
                        pieceElement.textContent = piece;
                        pieceElement.style.color = row < 2 ? 'black' : 'white';
                        pieceElement.dataset.type = this.getPieceType(piece);
                        squares[i].appendChild(pieceElement);
                    }
                }
            }

            handleSquareClick(event) {
                if (!this.gameActive) return;

                const square = event.currentTarget;
                const piece = square.querySelector('.piece');

                if (this.selectedPiece) {
                    if (square === this.selectedPiece.square) {
                        this.clearSelection();
                        return;
                    }

                    if (this.isValidMove(this.selectedPiece.square, square)) {
                        this.movePiece(this.selectedPiece.square, square);
                        this.currentPlayer = this.currentPlayer === 'white' ? 'black' : 'white';
                        this.updateTurnDisplay();
                    }
                    this.clearSelection();
                } else if (piece && this.isCorrectPlayer(piece)) {
                    this.selectedPiece = {
                        square: square,
                        element: piece
                    };
                    square.classList.add('selected');
                    this.showPossibleMoves(square);
                }
            }

            isValidMove(fromSquare, toSquare) {
                const fromPiece = fromSquare.querySelector('.piece');
                const toPiece = toSquare.querySelector('.piece');
                const pieceType = fromPiece.dataset.type;
                
                // Basic king capture check
                if (toPiece && toPiece.dataset.type === 'king') {
                    this.showGameOver(fromPiece.style.color === 'white' ? 'White' : 'Black');
                    return false;
                }

                return true; // Simplified validation
            }

            movePiece(fromSquare, toSquare) {
                const piece = fromSquare.querySelector('.piece');
                const targetPiece = toSquare.querySelector('.piece');

                if (targetPiece) {
                    this.capturePiece(targetPiece);
                }

                toSquare.appendChild(piece);
            }

            capturePiece(piece) {
                const capturedDiv = piece.style.color === 'white' 
                    ? document.getElementById('captured-white') 
                    : document.getElementById('captured-black');

                const capturedElement = document.createElement('div');
                capturedElement.className = 'captured-piece';
                capturedElement.textContent = piece.textContent;
                capturedDiv.appendChild(capturedElement);

                if (piece.dataset.type === 'king') {
                    this.showGameOver(piece.style.color === 'white' ? 'Black' : 'White');
                }
            }

            showGameOver(winner) {
                this.gameActive = false;
                const gameOverDiv = document.getElementById('game-over');
                const winnerText = document.getElementById('winner-text');
                winnerText.textContent = `${winner} Wins!`;
                gameOverDiv.style.display = 'block';
            }

            updateTurnDisplay() {
                document.getElementById('current-turn').textContent = 
                    this.currentPlayer.charAt(0).toUpperCase() + this.currentPlayer.slice(1);
            }

            isCorrectPlayer(piece) {
                return piece.style.color === this.currentPlayer;
            }

            getPieceType(piece) {
                const pieces = {
                    '♔': 'king', '♚': 'king',
                    '♕': 'queen', '♛': 'queen',
                    '♖': 'rook', '♜': 'rook',
                    '♗': 'bishop', '♝': 'bishop',
                    '♘': 'knight', '♞': 'knight',
                    '♙': 'pawn', '♟': 'pawn'
                };
                return pieces[piece];
            }

            clearSelection() {
                if (this.selectedPiece) {
                    this.selectedPiece.square.classList.remove('selected');
                    this.selectedPiece = null;
                }
                this.clearPossibleMoves();
            }

            showPossibleMoves(square) {
                // Simplified possible moves visualization
                const allSquares = document.getElementsByClassName('square');
                Array.from(allSquares).forEach(sq => {
                    if (this.isValidMove(square, sq)) {
                        sq.classList.add('possible-move');
                    }
                });
            }

            clearPossibleMoves() {
                const squares = document.getElementsByClassName('square');
                Array.from(squares).forEach(sq => sq.classList.remove('possible-move'));
            }
        }

        // Initialize the game
        const game = new ChessGame();
    </script>
</body>
</html>
